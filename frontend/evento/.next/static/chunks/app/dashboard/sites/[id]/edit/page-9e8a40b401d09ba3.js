(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[458],{128:function(e,t,s){Promise.resolve().then(s.bind(s,6774))},401:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});let i=(0,s(9205).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},2208:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});let i=(0,s(9205).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8728:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});let i=(0,s(9205).Z)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9376:function(e,t,s){"use strict";var i=s(5475);s.o(i,"useParams")&&s.d(t,{useParams:function(){return i.useParams}}),s.o(i,"usePathname")&&s.d(t,{usePathname:function(){return i.usePathname}}),s.o(i,"useRouter")&&s.d(t,{useRouter:function(){return i.useRouter}})},6774:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var i=s(7437),a=s(2265),n=s(9376),r=s(9827),l=s(1713),o=s(1770),c=s(5515),u=s.n(c),d=s(9205);let h=(0,d.Z)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var p=s(2208);let m=(0,d.Z)("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]),x=(0,d.Z)("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]);var v=s(8728);let g=(0,d.Z)("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),f=(0,d.Z)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),b=(0,d.Z)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);var y=s(401),j=s(7648),N=s(1837);function w(){let e=(0,n.useParams)();(0,n.useRouter)();let t=(0,r.NL)(),s=e.id,[c,d]=(0,a.useState)("content"),[g,f]=(0,a.useState)([]),[b,y]=(0,a.useState)(!1),{data:w,isLoading:C}=(0,l.a)({queryKey:["site",s],queryFn:async()=>(await N.VL.getOne(s)).data}),P=(0,o.D)({mutationFn:e=>N.VL.update(s,e),onSuccess:()=>{t.invalidateQueries({queryKey:["site",s]}),y(!1),u().fire({icon:"success",title:"Saved!",timer:1500,showConfirmButton:!1})},onError:e=>{var t,s;u().fire({icon:"error",title:"Error",text:(null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.error)||"Failed to save"})}}),M=(0,o.D)({mutationFn:()=>N.VL.publish(s),onSuccess:()=>{t.invalidateQueries({queryKey:["site",s]}),u().fire({icon:"success",title:"Published!",text:"Your site is now live",timer:2e3,showConfirmButton:!1})},onError:e=>{var t,s,i,a;u().fire({icon:"error",title:"Cannot Publish",text:(null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.error)||"Please fill in all required fields",html:(null===(a=e.response)||void 0===a?void 0:null===(i=a.data)||void 0===i?void 0:i.missingFields)?'<p>Missing fields:</p><ul class="text-left mt-2">'.concat(e.response.data.missingFields.map(e=>"<li>- ".concat(e,"</li>")).join(""),"</ul>"):void 0})}}),E=null==w?void 0:w.templateId;return C?(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):w?(0,i.jsxs)("div",{className:"min-h-screen bg-gray-50 pb-20 md:pb-0",children:[(0,i.jsx)("header",{className:"sticky top-0 z-30 bg-white border-b border-gray-200 px-4 py-3",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)(j.default,{href:"/dashboard/sites",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,i.jsx)(h,{className:"w-5 h-5"})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"font-semibold text-gray-900 truncate max-w-[150px] sm:max-w-none",children:w.title}),(0,i.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full ".concat("published"===w.status?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"),children:w.status})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:["published"===w.status&&(0,i.jsx)(j.default,{href:"/e/".concat(w.slug),target:"_blank",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,i.jsx)(p.Z,{className:"w-5 h-5 text-gray-600"})}),(0,i.jsx)("button",{onClick:()=>M.mutate(),disabled:M.isPending,className:"btn-primary text-sm px-4 py-2",children:M.isPending?"Publishing...":"published"===w.status?"Update":"Publish"})]})]})}),(0,i.jsx)("div",{className:"flex border-b border-gray-200 bg-white px-4 overflow-x-auto",children:[{id:"content",icon:m,label:"Content"},{id:"design",icon:x,label:"Design"},{id:"settings",icon:v.Z,label:"Settings"}].map(e=>(0,i.jsxs)("button",{onClick:()=>d(e.id),className:"flex items-center gap-2 px-4 py-3 border-b-2 transition-colors whitespace-nowrap ".concat(c===e.id?"border-purple-600 text-purple-600":"border-transparent text-gray-600 hover:text-gray-900"),children:[(0,i.jsx)(e.icon,{className:"w-4 h-4"}),e.label]},e.id))}),(0,i.jsxs)("div",{className:"p-4 max-w-3xl mx-auto",children:["content"===c&&(0,i.jsx)(k,{site:w,template:E,expandedSections:g,toggleSection:e=>{f(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},onUpdate:e=>{P.mutate(e)}}),"design"===c&&(0,i.jsx)(S,{site:w,template:E,onUpdate:e=>{P.mutate(e)}}),"settings"===c&&(0,i.jsx)(R,{site:w,onUpdate:e=>{P.mutate(e)}})]})]}):(0,i.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Site not found"}),(0,i.jsx)(j.default,{href:"/dashboard/sites",className:"text-purple-600 hover:underline",children:"Back to sites"})]})})}function k(e){let{site:t,template:s,expandedSections:a,toggleSection:n,onUpdate:r}=e,l=(null==s?void 0:s.sections)||[];return(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Site Title"}),(0,i.jsx)("input",{type:"text",defaultValue:t.title,onBlur:e=>{e.target.value!==t.title&&r({title:e.target.value})},className:"input-field",placeholder:"Enter site title"})]}),(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mt-6 mb-2",children:"Sections"}),0===l.length?(0,i.jsx)("div",{className:"card text-center py-8",children:(0,i.jsx)("p",{className:"text-gray-500",children:"No sections defined in this template"})}):(0,i.jsx)("div",{className:"space-y-3",children:l.sort((e,t)=>e.order-t.order).map(e=>{var s,l;let o=null===(s=t.sections)||void 0===s?void 0:s.find(t=>t.sectionId===e.id),c=a.includes(e.id),u=(null==o?void 0:o.visible)!==!1;return(0,i.jsxs)("div",{className:"card p-0 overflow-hidden",children:[(0,i.jsxs)("button",{onClick:()=>n(e.id),className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition-colors",children:[(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[(0,i.jsx)(g,{className:"w-5 h-5 text-gray-400"}),(0,i.jsxs)("div",{className:"text-left",children:[(0,i.jsx)("h4",{className:"font-medium text-gray-900",children:e.name}),(0,i.jsx)("p",{className:"text-sm text-gray-500 capitalize",children:e.type.replace("_"," ")})]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[!u&&(0,i.jsx)("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:"Hidden"}),c?(0,i.jsx)(f,{className:"w-5 h-5 text-gray-400"}):(0,i.jsx)(b,{className:"w-5 h-5 text-gray-400"})]})]}),c&&(0,i.jsxs)("div",{className:"border-t border-gray-100 p-4 space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)("span",{className:"text-sm text-gray-600",children:"Show this section"}),(0,i.jsx)("button",{onClick:()=>{var s;r({sections:(null===(s=t.sections)||void 0===s?void 0:s.map(t=>t.sectionId===e.id?{...t,visible:!t.visible}:t))||[]})},className:"w-12 h-6 rounded-full transition-colors ".concat(u?"bg-purple-600":"bg-gray-300"),children:(0,i.jsx)("div",{className:"w-5 h-5 bg-white rounded-full shadow transform transition-transform ".concat(u?"translate-x-6":"translate-x-0.5")})})]}),null===(l=e.fields)||void 0===l?void 0:l.map(s=>{var a;return(0,i.jsxs)("div",{children:[(0,i.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.label,s.required&&(0,i.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,i.jsx)(C,{field:s,value:null==o?void 0:null===(a=o.content)||void 0===a?void 0:a[s.id],onChange:i=>{var a;r({sections:(null===(a=t.sections)||void 0===a?void 0:a.map(t=>t.sectionId===e.id?{...t,content:{...t.content,[s.id]:i}}:t))||[]})}})]},s.id)})]})]},e.id)})})]})}function C(e){let{field:t,value:s,onChange:a}=e;switch(t.type){case"textarea":return(0,i.jsx)("textarea",{defaultValue:s||"",onBlur:e=>a(e.target.value),className:"input-field min-h-[100px]",placeholder:t.placeholder});case"date":return(0,i.jsx)("input",{type:"date",defaultValue:s||"",onChange:e=>a(e.target.value),className:"input-field"});case"time":return(0,i.jsx)("input",{type:"time",defaultValue:s||"",onChange:e=>a(e.target.value),className:"input-field"});case"datetime":return(0,i.jsx)("input",{type:"datetime-local",defaultValue:s||"",onChange:e=>a(e.target.value),className:"input-field"});case"number":return(0,i.jsx)("input",{type:"number",defaultValue:s||"",onBlur:e=>a(e.target.value),className:"input-field",placeholder:t.placeholder});case"boolean":return(0,i.jsx)("button",{onClick:()=>a(!s),className:"w-12 h-6 rounded-full transition-colors ".concat(s?"bg-purple-600":"bg-gray-300"),children:(0,i.jsx)("div",{className:"w-5 h-5 bg-white rounded-full shadow transform transition-transform ".concat(s?"translate-x-6":"translate-x-0.5")})});case"select":var n;return(0,i.jsxs)("select",{defaultValue:s||"",onChange:e=>a(e.target.value),className:"input-field",children:[(0,i.jsx)("option",{value:"",children:"Select..."}),null===(n=t.options)||void 0===n?void 0:n.map(e=>(0,i.jsx)("option",{value:e,children:e},e))]});default:return(0,i.jsx)("input",{type:"email"===t.type?"email":"url"===t.type?"url":"text",defaultValue:s||"",onBlur:e=>a(e.target.value),className:"input-field",placeholder:t.placeholder})}}function S(e){let{site:t,template:s,onUpdate:a}=e,n=(null==s?void 0:s.colorSchemes)||[],r=(null==s?void 0:s.fontPairs)||[];return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Color Scheme"}),0===n.length?(0,i.jsx)("p",{className:"text-gray-500",children:"No color schemes available"}):(0,i.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:n.map(e=>(0,i.jsxs)("button",{onClick:()=>a({selectedColorScheme:e.id}),className:"p-4 rounded-xl border-2 transition-all ".concat(t.selectedColorScheme===e.id?"border-purple-600 bg-purple-50":"border-gray-200 hover:border-gray-300"),children:[(0,i.jsxs)("div",{className:"flex gap-1 mb-2",children:[(0,i.jsx)("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:e.primary}}),(0,i.jsx)("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:e.secondary}}),(0,i.jsx)("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:e.accent}})]}),(0,i.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.name}),t.selectedColorScheme===e.id&&(0,i.jsx)(y.Z,{className:"w-4 h-4 text-purple-600 mt-1"})]},e.id))})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Font Style"}),0===r.length?(0,i.jsx)("p",{className:"text-gray-500",children:"No font styles available"}):(0,i.jsx)("div",{className:"space-y-3",children:r.map(e=>(0,i.jsx)("button",{onClick:()=>a({selectedFontPair:e.id}),className:"w-full p-4 rounded-xl border-2 text-left transition-all ".concat(t.selectedFontPair===e.id?"border-purple-600 bg-purple-50":"border-gray-200 hover:border-gray-300"),children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-semibold text-gray-900",style:{fontFamily:e.heading},children:e.name}),(0,i.jsxs)("p",{className:"text-sm text-gray-500",style:{fontFamily:e.body},children:[e.heading," + ",e.body]})]}),t.selectedFontPair===e.id&&(0,i.jsx)(y.Z,{className:"w-5 h-5 text-purple-600"})]})},e.id))})]})]})}function R(e){var t,s,a,n,r,l,o,c,u,d,h,p,m,x;let{site:v,onUpdate:g}=e;return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"RSVP Settings"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900",children:"Enable RSVP"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Allow guests to respond to your event"})]}),(0,i.jsx)("button",{onClick:()=>{var e;return g({settings:{...v.settings,enableRsvp:!(null===(e=v.settings)||void 0===e?void 0:e.enableRsvp)}})},className:"w-12 h-6 rounded-full transition-colors ".concat((null===(t=v.settings)||void 0===t?void 0:t.enableRsvp)?"bg-purple-600":"bg-gray-300"),children:(0,i.jsx)("div",{className:"w-5 h-5 bg-white rounded-full shadow transform transition-transform ".concat((null===(s=v.settings)||void 0===s?void 0:s.enableRsvp)?"translate-x-6":"translate-x-0.5")})})]}),(null===(a=v.settings)||void 0===a?void 0:a.enableRsvp)&&(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"RSVP Deadline"}),(0,i.jsx)("input",{type:"date",defaultValue:(null===(r=v.settings)||void 0===r?void 0:null===(n=r.rsvpDeadline)||void 0===n?void 0:n.split("T")[0])||"",onChange:e=>g({settings:{...v.settings,rsvpDeadline:e.target.value}}),className:"input-field"})]})]})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Wishes/Guestbook"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900",children:"Enable Wishes"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Allow guests to leave messages"})]}),(0,i.jsx)("button",{onClick:()=>{var e;return g({settings:{...v.settings,enableWishes:!(null===(e=v.settings)||void 0===e?void 0:e.enableWishes)}})},className:"w-12 h-6 rounded-full transition-colors ".concat((null===(l=v.settings)||void 0===l?void 0:l.enableWishes)?"bg-purple-600":"bg-gray-300"),children:(0,i.jsx)("div",{className:"w-5 h-5 bg-white rounded-full shadow transform transition-transform ".concat((null===(o=v.settings)||void 0===o?void 0:o.enableWishes)?"translate-x-6":"translate-x-0.5")})})]}),(null===(c=v.settings)||void 0===c?void 0:c.enableWishes)&&(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-medium text-gray-900",children:"Require Approval"}),(0,i.jsx)("p",{className:"text-sm text-gray-500",children:"Review wishes before showing"})]}),(0,i.jsx)("button",{onClick:()=>{var e;return g({settings:{...v.settings,requireWishApproval:!(null===(e=v.settings)||void 0===e?void 0:e.requireWishApproval)}})},className:"w-12 h-6 rounded-full transition-colors ".concat((null===(u=v.settings)||void 0===u?void 0:u.requireWishApproval)?"bg-purple-600":"bg-gray-300"),children:(0,i.jsx)("div",{className:"w-5 h-5 bg-white rounded-full shadow transform transition-transform ".concat((null===(d=v.settings)||void 0===d?void 0:d.requireWishApproval)?"translate-x-6":"translate-x-0.5")})})]})]})]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"Event Details"}),(0,i.jsxs)("div",{className:"space-y-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Date"}),(0,i.jsx)("input",{type:"datetime-local",defaultValue:(null===(p=v.settings)||void 0===p?void 0:null===(h=p.eventDate)||void 0===h?void 0:h.slice(0,16))||"",onChange:e=>g({settings:{...v.settings,eventDate:e.target.value}}),className:"input-field"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event End Date (optional)"}),(0,i.jsx)("input",{type:"datetime-local",defaultValue:(null===(x=v.settings)||void 0===x?void 0:null===(m=x.eventEndDate)||void 0===m?void 0:m.slice(0,16))||"",onChange:e=>g({settings:{...v.settings,eventEndDate:e.target.value}}),className:"input-field"})]})]})]})]})}},1837:function(e,t,s){"use strict";s.d(t,{VL:function(){return c},YK:function(){return u},cF:function(){return d},iJ:function(){return l},oI:function(){return o}});var i=s(3464),a=s(4131);let n=s(257).env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api",r=i.Z.create({baseURL:n,headers:{"Content-Type":"application/json"}});r.interceptors.request.use(e=>{let t=a.Z.get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),r.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(a.Z.remove("token"),window.location.href="/login"),Promise.reject(e)});let l={login:(e,t)=>r.post("/auth/login",{email:e,password:t}),register:(e,t,s)=>r.post("/auth/register",{name:e,email:t,password:s}),me:()=>r.get("/auth/me")},o={getPublished:()=>r.get("/templates/published"),getAll:()=>r.get("/templates"),getOne:e=>r.get("/templates/".concat(e)),create:e=>r.post("/templates",e),update:(e,t)=>r.put("/templates/".concat(e),t),delete:e=>r.delete("/templates/".concat(e)),duplicate:e=>r.post("/templates/".concat(e,"/duplicate")),publish:e=>r.post("/templates/".concat(e,"/publish")),unpublish:e=>r.post("/templates/".concat(e,"/unpublish")),preview:(e,t)=>r.post("/templates/".concat(e,"/preview"),{previewDataId:t}),addSection:(e,t)=>r.post("/templates/".concat(e,"/sections"),t),updateSection:(e,t,s)=>r.put("/templates/".concat(e,"/sections/").concat(t),s),deleteSection:(e,t)=>r.delete("/templates/".concat(e,"/sections/").concat(t)),reorderSections:(e,t)=>r.post("/templates/".concat(e,"/sections/reorder"),{sectionOrder:t})},c={getAll:()=>r.get("/sites"),getOne:e=>r.get("/sites/".concat(e)),getBySlug:e=>r.get("/sites/public/".concat(e)),create:(e,t)=>r.post("/sites",{templateId:e,title:t}),update:(e,t)=>r.put("/sites/".concat(e),t),updateSlug:(e,t)=>r.put("/sites/".concat(e,"/slug"),{slug:t}),updateSection:(e,t,s,i)=>r.put("/sites/".concat(e,"/sections/").concat(t),{content:s,visible:i}),reorderSections:(e,t)=>r.post("/sites/".concat(e,"/sections/reorder"),{sectionOrder:t}),publish:e=>r.post("/sites/".concat(e,"/publish")),unpublish:e=>r.post("/sites/".concat(e,"/unpublish")),delete:e=>r.delete("/sites/".concat(e)),getStats:e=>r.get("/sites/".concat(e,"/stats"))},u={getAll:e=>r.get("/guests/".concat(e)),getStats:e=>r.get("/guests/".concat(e,"/stats")),updateStatus:(e,t,s)=>r.put("/guests/".concat(e,"/").concat(t,"/status"),{status:s}),delete:(e,t)=>r.delete("/guests/".concat(e,"/").concat(t)),export:e=>r.get("/guests/".concat(e,"/export")),submitRsvp:(e,t)=>r.post("/guests/".concat(e,"/rsvp"),t),lookupRsvp:(e,t)=>r.post("/guests/".concat(e,"/rsvp/lookup"),{email:t}),updateRsvp:(e,t)=>r.put("/guests/".concat(e,"/rsvp"),t)},d={getAll:e=>r.get("/wishes/".concat(e)),getApproved:e=>r.get("/wishes/".concat(e,"/approved")),getStats:e=>r.get("/wishes/".concat(e,"/stats")),approve:(e,t)=>r.post("/wishes/".concat(e,"/").concat(t,"/approve")),reject:(e,t)=>r.post("/wishes/".concat(e,"/").concat(t,"/reject")),toggleHighlight:(e,t)=>r.post("/wishes/".concat(e,"/").concat(t,"/highlight")),delete:(e,t)=>r.delete("/wishes/".concat(e,"/").concat(t)),bulkApprove:(e,t)=>r.post("/wishes/".concat(e,"/bulk/approve"),{wishIds:t}),bulkReject:(e,t)=>r.post("/wishes/".concat(e,"/bulk/reject"),{wishIds:t}),bulkDelete:(e,t)=>r.post("/wishes/".concat(e,"/bulk/delete"),{wishIds:t}),submit:(e,t,s)=>r.post("/wishes/".concat(e),{authorName:t,message:s})}},2894:function(e,t,s){"use strict";s.d(t,{R:function(){return l},m:function(){return r}});var i=s(8238),a=s(7989),n=s(1255),r=class extends a.F{#e;#t;#s;#i;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#s=e.mutationCache,this.#t=[],this.state=e.state||l(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||("pending"===this.state.status?this.scheduleGc():this.#s.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(e){let t=()=>{this.#a({type:"continue"})},s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=(0,n.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(e,s):Promise.reject(Error("No mutationFn found")),onFail:(e,t)=>{this.#a({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#a({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#s.canRun(this)});let i="pending"===this.state.status,a=!this.#i.canStart();try{if(i)t();else{this.#a({type:"pending",variables:e,isPaused:a}),await this.#s.config.onMutate?.(e,this,s);let t=await this.options.onMutate?.(e,s);t!==this.state.context&&this.#a({type:"pending",context:t,variables:e,isPaused:a})}let n=await this.#i.start();return await this.#s.config.onSuccess?.(n,e,this.state.context,this,s),await this.options.onSuccess?.(n,e,this.state.context,s),await this.#s.config.onSettled?.(n,null,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(n,null,e,this.state.context,s),this.#a({type:"success",data:n}),n}catch(t){try{throw await this.#s.config.onError?.(t,e,this.state.context,this,s),await this.options.onError?.(t,e,this.state.context,s),await this.#s.config.onSettled?.(void 0,t,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(void 0,t,e,this.state.context,s),t}finally{this.#a({type:"error",error:t})}}finally{this.#s.runNext(this)}}#a(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),i.Vr.batch(()=>{this.#t.forEach(t=>{t.onMutationUpdate(e)}),this.#s.notify({mutation:this,type:"updated",action:e})})}};function l(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},1770:function(e,t,s){"use strict";s.d(t,{D:function(){return u}});var i=s(2265),a=s(2894),n=s(8238),r=s(4112),l=s(5345),o=class extends r.l{#e;#n=void 0;#r;#l;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#o()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,l.VS)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,l.Ym)(t.mutationKey)!==(0,l.Ym)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#o(),this.#c(e)}getCurrentResult(){return this.#n}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#o(),this.#c()}mutate(e,t){return this.#l=t,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#o(){let e=this.#r?.state??(0,a.R)();this.#n={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#c(e){n.Vr.batch(()=>{if(this.#l&&this.hasListeners()){let t=this.#n.variables,s=this.#n.context,i={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#l.onSuccess?.(e.data,t,s,i),this.#l.onSettled?.(e.data,null,t,s,i)):e?.type==="error"&&(this.#l.onError?.(e.error,t,s,i),this.#l.onSettled?.(void 0,e.error,t,s,i))}this.listeners.forEach(e=>{e(this.#n)})})}},c=s(9827);function u(e,t){let s=(0,c.NL)(t),[a]=i.useState(()=>new o(s,e));i.useEffect(()=>{a.setOptions(e)},[a,e]);let r=i.useSyncExternalStore(i.useCallback(e=>a.subscribe(n.Vr.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),u=i.useCallback((e,t)=>{a.mutate(e,t).catch(l.ZT)},[a]);if(r.error&&(0,l.L3)(a.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:u,mutateAsync:r.mutate}}}},function(e){e.O(0,[461,294,648,763,713,971,117,744],function(){return e(e.s=128)}),_N_E=e.O()}]);