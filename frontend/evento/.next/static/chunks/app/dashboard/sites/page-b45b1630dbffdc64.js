(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[140],{8370:function(e,t,s){Promise.resolve().then(s.bind(s,4441))},4441:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return C}});var a=s(7437),l=s(2265),c=s(9827),i=s(1713),n=s(1770),r=s(7648),o=s(5515),d=s.n(o),u=s(9397),p=s(3247),x=s(9202),g=s(1533),m=s(8867),h=s(7404),f=s(8930),b=s(2208),j=s(5805),v=s(8997),y=s(5868),N=s(6362),w=s(1837);function C(){let e=(0,c.NL)(),[t,s]=(0,l.useState)(""),[o,g]=(0,l.useState)("all"),{data:m,isLoading:h}=(0,i.a)({queryKey:["sites"],queryFn:async()=>(await w.VL.getAll()).data}),f=(0,n.D)({mutationFn:e=>w.VL.delete(e),onSuccess:()=>{e.invalidateQueries({queryKey:["sites"]}),d().fire({icon:"success",title:"Deleted",text:"Site has been deleted",timer:1500,showConfirmButton:!1})}}),b=async e=>{(await d().fire({title:"Delete Site?",text:'Are you sure you want to delete "'.concat(e.title,'"? This cannot be undone.'),icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",confirmButtonText:"Delete"})).isConfirmed&&f.mutate(e._id)},j=e=>{let t="".concat(window.location.origin,"/e/").concat(e.slug);navigator.clipboard.writeText(t),d().fire({icon:"success",title:"Link Copied!",text:t,timer:2e3,showConfirmButton:!1})},v=null==m?void 0:m.filter(e=>{let s=e.title.toLowerCase().includes(t.toLowerCase()),a="all"===o||e.status===o;return s&&a});return(0,a.jsxs)("div",{className:"space-y-6 pb-20 md:pb-0",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"My Sites"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your event sites"})]}),(0,a.jsxs)(r.default,{href:"/dashboard/templates",className:"btn-primary inline-flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"})," Create New Site"]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(p.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search sites...",value:t,onChange:e=>s(e.target.value),className:"input-field pl-12"})]}),(0,a.jsx)("div",{className:"flex gap-2",children:["all","published","draft"].map(e=>(0,a.jsx)("button",{onClick:()=>g(e),className:"px-4 py-2 rounded-xl capitalize transition-all ".concat(o===e?"bg-purple-600 text-white":"bg-white text-gray-600 hover:bg-gray-100"),children:e},e))})]}),h?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(e=>(0,a.jsxs)("div",{className:"card animate-pulse",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-2/3 mb-4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("div",{className:"h-10 bg-gray-200 rounded flex-1"}),(0,a.jsx)("div",{className:"h-10 bg-gray-200 rounded flex-1"})]})]},e))}):v&&v.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(e=>(0,a.jsx)(k,{site:e,onDelete:()=>b(e),onCopyLink:()=>j(e)},e._id))}):(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(x.Z,{className:"w-10 h-10 text-gray-400"})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No sites yet"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Create your first event site from a template"}),(0,a.jsxs)(r.default,{href:"/dashboard/templates",className:"btn-primary inline-flex items-center gap-2",children:[(0,a.jsx)(u.Z,{className:"w-4 h-4"})," Browse Templates"]})]})]})}function k(e){var t,s,c;let{site:i,onDelete:n,onCopyLink:o}=e,[d,u]=(0,l.useState)(!1);return(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-100 to-pink-100 rounded-xl flex items-center justify-center",children:(0,a.jsx)(x.Z,{className:"w-6 h-6 text-purple-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:i.title}),(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 rounded-full ".concat("published"===i.status?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"),children:i.status})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("button",{onClick:()=>u(!d),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(g.Z,{className:"w-5 h-5 text-gray-500"})}),d&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>u(!1)}),(0,a.jsxs)("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white rounded-xl shadow-lg border border-gray-100 py-2 z-20",children:[(0,a.jsxs)("button",{onClick:()=>{o(),u(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"})," Copy Link"]}),(0,a.jsxs)("button",{onClick:()=>u(!1),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4"})," QR Code"]}),(0,a.jsx)("hr",{className:"my-2"}),(0,a.jsxs)("button",{onClick:()=>{n(),u(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[(0,a.jsx)(f.Z,{className:"w-4 h-4"})," Delete"]})]})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4 text-center",children:[(0,a.jsxs)("div",{className:"p-2 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"flex items-center justify-center gap-1 text-gray-500 mb-1",children:(0,a.jsx)(b.Z,{className:"w-4 h-4"})}),(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:(null===(t=i.stats)||void 0===t?void 0:t.views)||0}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Views"})]}),(0,a.jsxs)("div",{className:"p-2 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"flex items-center justify-center gap-1 text-gray-500 mb-1",children:(0,a.jsx)(j.Z,{className:"w-4 h-4"})}),(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:(null===(s=i.stats)||void 0===s?void 0:s.rsvpCount)||0}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"RSVPs"})]}),(0,a.jsxs)("div",{className:"p-2 bg-gray-50 rounded-lg",children:[(0,a.jsx)("div",{className:"flex items-center justify-center gap-1 text-gray-500 mb-1",children:(0,a.jsx)(v.Z,{className:"w-4 h-4"})}),(0,a.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:(null===(c=i.stats)||void 0===c?void 0:c.wishCount)||0}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Wishes"})]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(r.default,{href:"/dashboard/sites/".concat(i._id,"/edit"),className:"flex-1 btn-secondary text-sm flex items-center justify-center gap-2",children:[(0,a.jsx)(y.Z,{className:"w-4 h-4"})," Edit"]}),"published"===i.status&&(0,a.jsxs)(r.default,{href:"/e/".concat(i.slug),target:"_blank",className:"flex-1 btn-primary text-sm flex items-center justify-center gap-2",children:[(0,a.jsx)(N.Z,{className:"w-4 h-4"})," View"]})]})]})}},1837:function(e,t,s){"use strict";s.d(t,{VL:function(){return o},YK:function(){return d},cF:function(){return u},iJ:function(){return n},oI:function(){return r}});var a=s(3464),l=s(4131);let c=s(257).env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api",i=a.Z.create({baseURL:c,headers:{"Content-Type":"application/json"}});i.interceptors.request.use(e=>{let t=l.Z.get("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),i.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(l.Z.remove("token"),window.location.href="/login"),Promise.reject(e)});let n={login:(e,t)=>i.post("/auth/login",{email:e,password:t}),register:(e,t,s)=>i.post("/auth/register",{name:e,email:t,password:s}),me:()=>i.get("/auth/me")},r={getPublished:()=>i.get("/templates/published"),getAll:()=>i.get("/templates"),getOne:e=>i.get("/templates/".concat(e)),create:e=>i.post("/templates",e),update:(e,t)=>i.put("/templates/".concat(e),t),delete:e=>i.delete("/templates/".concat(e)),duplicate:e=>i.post("/templates/".concat(e,"/duplicate")),publish:e=>i.post("/templates/".concat(e,"/publish")),unpublish:e=>i.post("/templates/".concat(e,"/unpublish")),preview:(e,t)=>i.post("/templates/".concat(e,"/preview"),{previewDataId:t}),addSection:(e,t)=>i.post("/templates/".concat(e,"/sections"),t),updateSection:(e,t,s)=>i.put("/templates/".concat(e,"/sections/").concat(t),s),deleteSection:(e,t)=>i.delete("/templates/".concat(e,"/sections/").concat(t)),reorderSections:(e,t)=>i.post("/templates/".concat(e,"/sections/reorder"),{sectionOrder:t})},o={getAll:()=>i.get("/sites"),getOne:e=>i.get("/sites/".concat(e)),getBySlug:e=>i.get("/sites/public/".concat(e)),create:(e,t)=>i.post("/sites",{templateId:e,title:t}),update:(e,t)=>i.put("/sites/".concat(e),t),updateSlug:(e,t)=>i.put("/sites/".concat(e,"/slug"),{slug:t}),updateSection:(e,t,s,a)=>i.put("/sites/".concat(e,"/sections/").concat(t),{content:s,visible:a}),reorderSections:(e,t)=>i.post("/sites/".concat(e,"/sections/reorder"),{sectionOrder:t}),publish:e=>i.post("/sites/".concat(e,"/publish")),unpublish:e=>i.post("/sites/".concat(e,"/unpublish")),delete:e=>i.delete("/sites/".concat(e)),getStats:e=>i.get("/sites/".concat(e,"/stats"))},d={getAll:e=>i.get("/guests/".concat(e)),getStats:e=>i.get("/guests/".concat(e,"/stats")),updateStatus:(e,t,s)=>i.put("/guests/".concat(e,"/").concat(t,"/status"),{status:s}),delete:(e,t)=>i.delete("/guests/".concat(e,"/").concat(t)),export:e=>i.get("/guests/".concat(e,"/export")),submitRsvp:(e,t)=>i.post("/guests/".concat(e,"/rsvp"),t),lookupRsvp:(e,t)=>i.post("/guests/".concat(e,"/rsvp/lookup"),{email:t}),updateRsvp:(e,t)=>i.put("/guests/".concat(e,"/rsvp"),t)},u={getAll:e=>i.get("/wishes/".concat(e)),getApproved:e=>i.get("/wishes/".concat(e,"/approved")),getStats:e=>i.get("/wishes/".concat(e,"/stats")),approve:(e,t)=>i.post("/wishes/".concat(e,"/").concat(t,"/approve")),reject:(e,t)=>i.post("/wishes/".concat(e,"/").concat(t,"/reject")),toggleHighlight:(e,t)=>i.post("/wishes/".concat(e,"/").concat(t,"/highlight")),delete:(e,t)=>i.delete("/wishes/".concat(e,"/").concat(t)),bulkApprove:(e,t)=>i.post("/wishes/".concat(e,"/bulk/approve"),{wishIds:t}),bulkReject:(e,t)=>i.post("/wishes/".concat(e,"/bulk/reject"),{wishIds:t}),bulkDelete:(e,t)=>i.post("/wishes/".concat(e,"/bulk/delete"),{wishIds:t}),submit:(e,t,s)=>i.post("/wishes/".concat(e),{authorName:t,message:s})}}},function(e){e.O(0,[461,294,648,763,713,46,971,117,744],function(){return e(e.s=8370)}),_N_E=e.O()}]);