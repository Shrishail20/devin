(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[123],{8643:function(t,e,s){Promise.resolve().then(s.bind(s,7632))},1047:function(t,e,s){"use strict";s.d(e,{Z:function(){return i}});let i=(0,s(9205).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},2208:function(t,e,s){"use strict";s.d(e,{Z:function(){return i}});let i=(0,s(9205).Z)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},9202:function(t,e,s){"use strict";s.d(e,{Z:function(){return i}});let i=(0,s(9205).Z)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},8997:function(t,e,s){"use strict";s.d(e,{Z:function(){return i}});let i=(0,s(9205).Z)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]])},9397:function(t,e,s){"use strict";s.d(e,{Z:function(){return i}});let i=(0,s(9205).Z)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},3247:function(t,e,s){"use strict";s.d(e,{Z:function(){return i}});let i=(0,s(9205).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},2023:function(t,e,s){"use strict";s.d(e,{Z:function(){return i}});let i=(0,s(9205).Z)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]])},9376:function(t,e,s){"use strict";var i=s(5475);s.o(i,"useParams")&&s.d(e,{useParams:function(){return i.useParams}}),s.o(i,"usePathname")&&s.d(e,{usePathname:function(){return i.usePathname}}),s.o(i,"useRouter")&&s.d(e,{useRouter:function(){return i.useRouter}})},7632:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return b}});var i=s(7437),a=s(2265),n=s(9827),r=s(1713),o=s(1770),c=s(9376),u=s(5515),l=s.n(u),h=s(8997),d=s(2023),p=s(9202),m=s(1047),g=s(3247),y=s(2208),f=s(9397),v=s(1837);let x=["All","Wedding","Birthday","Corporate","Party","Other"];function b(){let t=(0,c.useRouter)(),e=(0,n.NL)(),[s,u]=(0,a.useState)(""),[y,f]=(0,a.useState)("All"),{data:b,isLoading:j}=(0,r.a)({queryKey:["templates","published"],queryFn:async()=>(await v.oI.getPublished()).data}),N=(0,o.D)({mutationFn:async t=>{let{templateId:e,title:s}=t;return(await v.VL.create(e,s)).data},onSuccess:s=>{e.invalidateQueries({queryKey:["sites"]}),t.push("/dashboard/sites/".concat(s._id,"/edit"))},onError:t=>{var e,s;l().fire({icon:"error",title:"Error",text:(null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.error)||"Failed to create site"})}}),C=async t=>{let{value:e}=await l().fire({title:"Create Your Site",input:"text",inputLabel:"Site Title",inputPlaceholder:"e.g., John & Jane Wedding",inputValue:"My ".concat(t.name),showCancelButton:!0,confirmButtonText:"Create",confirmButtonColor:"#9333ea",inputValidator:t=>t?null:"Please enter a title"});e&&N.mutate({templateId:t._id,title:e})},k=null==b?void 0:b.filter(t=>{var e;let i=t.name.toLowerCase().includes(s.toLowerCase())||(null===(e=t.description)||void 0===e?void 0:e.toLowerCase().includes(s.toLowerCase())),a="All"===y||t.category===y;return i&&a}),M=t=>{switch(t){case"Wedding":return(0,i.jsx)(h.Z,{className:"w-4 h-4"});case"Birthday":return(0,i.jsx)(d.Z,{className:"w-4 h-4"});case"Corporate":return(0,i.jsx)(p.Z,{className:"w-4 h-4"});case"Party":return(0,i.jsx)(m.Z,{className:"w-4 h-4"});default:return null}};return(0,i.jsxs)("div",{className:"space-y-6 pb-20 md:pb-0",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Templates"}),(0,i.jsx)("p",{className:"text-gray-600 mt-1",children:"Choose a template to create your event site"})]}),(0,i.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,i.jsxs)("div",{className:"relative flex-1",children:[(0,i.jsx)(g.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,i.jsx)("input",{type:"text",placeholder:"Search templates...",value:s,onChange:t=>u(t.target.value),className:"input-field pl-12"})]}),(0,i.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2 sm:pb-0",children:x.map(t=>(0,i.jsxs)("button",{onClick:()=>f(t),className:"flex items-center gap-2 px-4 py-2 rounded-xl whitespace-nowrap transition-all ".concat(y===t?"bg-purple-600 text-white":"bg-white text-gray-600 hover:bg-gray-100"),children:[M(t),t]},t))})]}),j?(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(t=>(0,i.jsxs)("div",{className:"card animate-pulse",children:[(0,i.jsx)("div",{className:"aspect-[4/3] bg-gray-200 rounded-xl mb-4"}),(0,i.jsx)("div",{className:"h-5 bg-gray-200 rounded w-2/3 mb-2"}),(0,i.jsx)("div",{className:"h-4 bg-gray-200 rounded w-full mb-4"}),(0,i.jsx)("div",{className:"h-10 bg-gray-200 rounded"})]},t))}):k&&k.length>0?(0,i.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(t=>(0,i.jsx)(w,{template:t,onUse:()=>C(t),isCreating:N.isPending},t._id))}):(0,i.jsxs)("div",{className:"text-center py-16",children:[(0,i.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,i.jsx)(g.Z,{className:"w-10 h-10 text-gray-400"})}),(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No templates found"}),(0,i.jsx)("p",{className:"text-gray-600",children:"Try adjusting your search or filter"})]})]})}function w(t){var e;let{template:s,onUse:a,isCreating:n}=t;return(0,i.jsxs)("div",{className:"card group overflow-hidden",children:[(0,i.jsxs)("div",{className:"aspect-[4/3] bg-gradient-to-br from-purple-100 to-pink-100 rounded-xl mb-4 relative overflow-hidden",children:[s.thumbnail?(0,i.jsx)("img",{src:s.thumbnail,alt:s.name,className:"w-full h-full object-cover"}):(0,i.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,i.jsx)(p.Z,{className:"w-16 h-16 text-purple-300"})}),(0,i.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:(0,i.jsxs)("button",{className:"bg-white text-gray-900 px-4 py-2 rounded-lg font-medium flex items-center gap-2 transform scale-90 group-hover:scale-100 transition-transform",children:[(0,i.jsx)(y.Z,{className:"w-4 h-4"})," Preview"]})})]}),(0,i.jsxs)("div",{className:"space-y-3",children:[(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,i.jsx)("h3",{className:"font-semibold text-gray-900",children:s.name}),s.category&&(0,i.jsx)("span",{className:"px-2 py-0.5 bg-purple-100 text-purple-700 text-xs rounded-full",children:s.category})]}),(0,i.jsx)("p",{className:"text-sm text-gray-600 line-clamp-2",children:s.description})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,i.jsxs)("span",{children:[(null===(e=s.sections)||void 0===e?void 0:e.length)||0," sections"]}),(0,i.jsxs)("span",{children:[s.usageCount||0," uses"]})]}),(0,i.jsxs)("button",{onClick:a,disabled:n,className:"w-full btn-primary flex items-center justify-center gap-2 disabled:opacity-50",children:[(0,i.jsx)(f.Z,{className:"w-4 h-4"}),"Use Template"]})]})]})}},1837:function(t,e,s){"use strict";s.d(e,{VL:function(){return u},YK:function(){return l},cF:function(){return h},iJ:function(){return o},oI:function(){return c}});var i=s(3464),a=s(4131);let n=s(257).env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api",r=i.Z.create({baseURL:n,headers:{"Content-Type":"application/json"}});r.interceptors.request.use(t=>{let e=a.Z.get("token");return e&&(t.headers.Authorization="Bearer ".concat(e)),t}),r.interceptors.response.use(t=>t,t=>{var e;return(null===(e=t.response)||void 0===e?void 0:e.status)===401&&(a.Z.remove("token"),window.location.href="/login"),Promise.reject(t)});let o={login:(t,e)=>r.post("/auth/login",{email:t,password:e}),register:(t,e,s)=>r.post("/auth/register",{name:t,email:e,password:s}),me:()=>r.get("/auth/me")},c={getPublished:()=>r.get("/templates/published"),getAll:()=>r.get("/templates"),getOne:t=>r.get("/templates/".concat(t)),create:t=>r.post("/templates",t),update:(t,e)=>r.put("/templates/".concat(t),e),delete:t=>r.delete("/templates/".concat(t)),duplicate:t=>r.post("/templates/".concat(t,"/duplicate")),publish:t=>r.post("/templates/".concat(t,"/publish")),unpublish:t=>r.post("/templates/".concat(t,"/unpublish")),preview:(t,e)=>r.post("/templates/".concat(t,"/preview"),{previewDataId:e}),addSection:(t,e)=>r.post("/templates/".concat(t,"/sections"),e),updateSection:(t,e,s)=>r.put("/templates/".concat(t,"/sections/").concat(e),s),deleteSection:(t,e)=>r.delete("/templates/".concat(t,"/sections/").concat(e)),reorderSections:(t,e)=>r.post("/templates/".concat(t,"/sections/reorder"),{sectionOrder:e})},u={getAll:()=>r.get("/sites"),getOne:t=>r.get("/sites/".concat(t)),getBySlug:t=>r.get("/sites/public/".concat(t)),create:(t,e)=>r.post("/sites",{templateId:t,title:e}),update:(t,e)=>r.put("/sites/".concat(t),e),updateSlug:(t,e)=>r.put("/sites/".concat(t,"/slug"),{slug:e}),updateSection:(t,e,s,i)=>r.put("/sites/".concat(t,"/sections/").concat(e),{content:s,visible:i}),reorderSections:(t,e)=>r.post("/sites/".concat(t,"/sections/reorder"),{sectionOrder:e}),publish:t=>r.post("/sites/".concat(t,"/publish")),unpublish:t=>r.post("/sites/".concat(t,"/unpublish")),delete:t=>r.delete("/sites/".concat(t)),getStats:t=>r.get("/sites/".concat(t,"/stats"))},l={getAll:t=>r.get("/guests/".concat(t)),getStats:t=>r.get("/guests/".concat(t,"/stats")),updateStatus:(t,e,s)=>r.put("/guests/".concat(t,"/").concat(e,"/status"),{status:s}),delete:(t,e)=>r.delete("/guests/".concat(t,"/").concat(e)),export:t=>r.get("/guests/".concat(t,"/export")),submitRsvp:(t,e)=>r.post("/guests/".concat(t,"/rsvp"),e),lookupRsvp:(t,e)=>r.post("/guests/".concat(t,"/rsvp/lookup"),{email:e}),updateRsvp:(t,e)=>r.put("/guests/".concat(t,"/rsvp"),e)},h={getAll:t=>r.get("/wishes/".concat(t)),getApproved:t=>r.get("/wishes/".concat(t,"/approved")),getStats:t=>r.get("/wishes/".concat(t,"/stats")),approve:(t,e)=>r.post("/wishes/".concat(t,"/").concat(e,"/approve")),reject:(t,e)=>r.post("/wishes/".concat(t,"/").concat(e,"/reject")),toggleHighlight:(t,e)=>r.post("/wishes/".concat(t,"/").concat(e,"/highlight")),delete:(t,e)=>r.delete("/wishes/".concat(t,"/").concat(e)),bulkApprove:(t,e)=>r.post("/wishes/".concat(t,"/bulk/approve"),{wishIds:e}),bulkReject:(t,e)=>r.post("/wishes/".concat(t,"/bulk/reject"),{wishIds:e}),bulkDelete:(t,e)=>r.post("/wishes/".concat(t,"/bulk/delete"),{wishIds:e}),submit:(t,e,s)=>r.post("/wishes/".concat(t),{authorName:e,message:s})}},2894:function(t,e,s){"use strict";s.d(e,{R:function(){return o},m:function(){return r}});var i=s(8238),a=s(7989),n=s(1255),r=class extends a.F{#t;#e;#s;#i;constructor(t){super(),this.#t=t.client,this.mutationId=t.mutationId,this.#s=t.mutationCache,this.#e=[],this.state=t.state||o(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||("pending"===this.state.status?this.scheduleGc():this.#s.remove(this))}continue(){return this.#i?.continue()??this.execute(this.state.variables)}async execute(t){let e=()=>{this.#a({type:"continue"})},s={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#i=(0,n.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(Error("No mutationFn found")),onFail:(t,e)=>{this.#a({type:"failed",failureCount:t,error:e})},onPause:()=>{this.#a({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#s.canRun(this)});let i="pending"===this.state.status,a=!this.#i.canStart();try{if(i)e();else{this.#a({type:"pending",variables:t,isPaused:a}),await this.#s.config.onMutate?.(t,this,s);let e=await this.options.onMutate?.(t,s);e!==this.state.context&&this.#a({type:"pending",context:e,variables:t,isPaused:a})}let n=await this.#i.start();return await this.#s.config.onSuccess?.(n,t,this.state.context,this,s),await this.options.onSuccess?.(n,t,this.state.context,s),await this.#s.config.onSettled?.(n,null,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(n,null,t,this.state.context,s),this.#a({type:"success",data:n}),n}catch(e){try{throw await this.#s.config.onError?.(e,t,this.state.context,this,s),await this.options.onError?.(e,t,this.state.context,s),await this.#s.config.onSettled?.(void 0,e,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(void 0,e,t,this.state.context,s),e}finally{this.#a({type:"error",error:e})}}finally{this.#s.runNext(this)}}#a(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"pending":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}})(this.state),i.Vr.batch(()=>{this.#e.forEach(e=>{e.onMutationUpdate(t)}),this.#s.notify({mutation:this,type:"updated",action:t})})}};function o(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},1770:function(t,e,s){"use strict";s.d(e,{D:function(){return l}});var i=s(2265),a=s(2894),n=s(8238),r=s(4112),o=s(5345),c=class extends r.l{#t;#n=void 0;#r;#o;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#c()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#t.defaultMutationOptions(t),(0,o.VS)(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(e.mutationKey)!==(0,o.Ym)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#c(),this.#u(t)}getCurrentResult(){return this.#n}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#c(),this.#u()}mutate(t,e){return this.#o=e,this.#r?.removeObserver(this),this.#r=this.#t.getMutationCache().build(this.#t,this.options),this.#r.addObserver(this),this.#r.execute(t)}#c(){let t=this.#r?.state??(0,a.R)();this.#n={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#u(t){n.Vr.batch(()=>{if(this.#o&&this.hasListeners()){let e=this.#n.variables,s=this.#n.context,i={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#o.onSuccess?.(t.data,e,s,i),this.#o.onSettled?.(t.data,null,e,s,i)):t?.type==="error"&&(this.#o.onError?.(t.error,e,s,i),this.#o.onSettled?.(void 0,t.error,e,s,i))}this.listeners.forEach(t=>{t(this.#n)})})}},u=s(9827);function l(t,e){let s=(0,u.NL)(e),[a]=i.useState(()=>new c(s,t));i.useEffect(()=>{a.setOptions(t)},[a,t]);let r=i.useSyncExternalStore(i.useCallback(t=>a.subscribe(n.Vr.batchCalls(t)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),l=i.useCallback((t,e)=>{a.mutate(t,e).catch(o.ZT)},[a]);if(r.error&&(0,o.L3)(a.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:l,mutateAsync:r.mutate}}}},function(t){t.O(0,[461,294,763,713,971,117,744],function(){return t(t.s=8643)}),_N_E=t.O()}]);