(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[308],{5377:function(t,e,s){Promise.resolve().then(s.bind(s,8868))},1047:function(t,e,s){"use strict";s.d(e,{Z:function(){return a}});let a=(0,s(9205).Z)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},401:function(t,e,s){"use strict";s.d(e,{Z:function(){return a}});let a=(0,s(9205).Z)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},8997:function(t,e,s){"use strict";s.d(e,{Z:function(){return a}});let a=(0,s(9205).Z)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]])},2023:function(t,e,s){"use strict";s.d(e,{Z:function(){return a}});let a=(0,s(9205).Z)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]])},5805:function(t,e,s){"use strict";s.d(e,{Z:function(){return a}});let a=(0,s(9205).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},2489:function(t,e,s){"use strict";s.d(e,{Z:function(){return a}});let a=(0,s(9205).Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},9376:function(t,e,s){"use strict";var a=s(5475);s.o(a,"useParams")&&s.d(e,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(e,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(e,{useRouter:function(){return a.useRouter}})},8868:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return j}});var a=s(7437),i=s(2265),n=s(9376),r=s(1713),o=s(1770),l=s(5515),c=s.n(l),u=s(2489),h=s(8997),d=s(2023),m=s(1047),p=s(9205);let x=(0,p.Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var g=s(401),b=s(5805);let v=(0,p.Z)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),y=(0,p.Z)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);var f=s(1837);function j(){var t,e;let s=(0,n.useParams)().slug,{data:i,isLoading:o,error:l}=(0,r.a)({queryKey:["public-site",s],queryFn:async()=>(await f.VL.getBySlug(s)).data});return o?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-50 via-white to-pink-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading event..."})]})}):l||!i?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-50 via-white to-pink-50",children:(0,a.jsxs)("div",{className:"text-center px-4",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(u.Z,{className:"w-10 h-10 text-gray-400"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Event Not Found"}),(0,a.jsx)("p",{className:"text-gray-600",children:"This event page doesn't exist or has been removed."})]})}):(i.templateId,(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-pink-50",children:[(0,a.jsx)(N,{site:i}),(null===(t=i.settings)||void 0===t?void 0:t.enableRsvp)&&(0,a.jsx)(w,{site:i}),(null===(e=i.settings)||void 0===e?void 0:e.enableWishes)&&(0,a.jsx)(k,{site:i}),(0,a.jsx)("footer",{className:"py-8 text-center text-gray-500 text-sm",children:(0,a.jsxs)("p",{children:["Created with ",(0,a.jsx)(h.Z,{className:"w-4 h-4 inline text-pink-500"})," using Evento"]})})]}))}function N(t){var e;let{site:s}=t,i=(null===(e=s.settings)||void 0===e?void 0:e.eventDate)?new Date(s.settings.eventDate):null;return(0,a.jsxs)("section",{className:"relative min-h-[80vh] flex items-center justify-center px-4 py-20",children:[(0,a.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute top-20 left-10 w-72 h-72 bg-purple-300 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-float"}),(0,a.jsx)("div",{className:"absolute bottom-20 right-10 w-72 h-72 bg-pink-300 rounded-full mix-blend-multiply filter blur-xl opacity-30 animate-float",style:{animationDelay:"2s"}})]}),(0,a.jsxs)("div",{className:"relative text-center max-w-2xl mx-auto",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(d.Z,{className:"w-12 h-12 text-purple-500 mx-auto mb-4"})}),(0,a.jsx)("h1",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-gray-900 mb-6 font-display",children:s.title}),s.description&&(0,a.jsx)("p",{className:"text-lg sm:text-xl text-gray-600 mb-8",children:s.description}),i&&(0,a.jsxs)("div",{className:"inline-flex flex-col sm:flex-row items-center gap-4 sm:gap-8 bg-white/80 backdrop-blur-lg rounded-2xl px-6 py-4 shadow-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-700",children:[(0,a.jsx)(m.Z,{className:"w-5 h-5 text-purple-600"}),(0,a.jsx)("span",{className:"font-medium",children:i.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-700",children:[(0,a.jsx)(x,{className:"w-5 h-5 text-purple-600"}),(0,a.jsx)("span",{className:"font-medium",children:i.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})})]})]})]})]})}function w(t){let{site:e}=t,[s,n]=(0,i.useState)({name:"",email:"",phone:"",status:"attending",numberOfGuests:1,message:""}),[r,l]=(0,i.useState)(!1),h=(0,o.D)({mutationFn:()=>f.YK.submitRsvp(e._id,s),onSuccess:()=>{l(!0),c().fire({icon:"success",title:"Thank You!",text:"Your RSVP has been submitted",timer:2e3,showConfirmButton:!1})},onError:t=>{var e,s;c().fire({icon:"error",title:"Error",text:(null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.error)||"Failed to submit RSVP"})}});return r?(0,a.jsx)("section",{className:"py-16 px-4",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto text-center",children:[(0,a.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(g.Z,{className:"w-10 h-10 text-green-600"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"RSVP Submitted!"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Thank you for your response. We look forward to seeing you!"})]})}):(0,a.jsx)("section",{className:"py-16 px-4 bg-white",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)(b.Z,{className:"w-10 h-10 text-purple-600 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"RSVP"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Let us know if you can make it!"})]}),(0,a.jsxs)("form",{onSubmit:t=>{t.preventDefault(),h.mutate()},className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Name *"}),(0,a.jsx)("input",{type:"text",required:!0,value:s.name,onChange:t=>n({...s,name:t.target.value}),className:"input-field",placeholder:"Enter your name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),(0,a.jsx)("input",{type:"email",required:!0,value:s.email,onChange:t=>n({...s,email:t.target.value}),className:"input-field",placeholder:"your@email.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone (optional)"}),(0,a.jsx)("input",{type:"tel",value:s.phone,onChange:t=>n({...s,phone:t.target.value}),className:"input-field",placeholder:"Your phone number"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Will you attend? *"}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:[{value:"attending",label:"Yes",icon:g.Z,color:"green"},{value:"not_attending",label:"No",icon:u.Z,color:"red"},{value:"maybe",label:"Maybe",icon:v,color:"yellow"}].map(t=>(0,a.jsxs)("button",{type:"button",onClick:()=>n({...s,status:t.value}),className:"p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-1 ".concat(s.status===t.value?"green"===t.color?"border-green-500 bg-green-50":"red"===t.color?"border-red-500 bg-red-50":"border-yellow-500 bg-yellow-50":"border-gray-200 hover:border-gray-300"),children:[(0,a.jsx)(t.icon,{className:"w-5 h-5 ".concat("green"===t.color?"text-green-600":"red"===t.color?"text-red-600":"text-yellow-600")}),(0,a.jsx)("span",{className:"text-sm font-medium",children:t.label})]},t.value))})]}),"attending"===s.status&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Guests"}),(0,a.jsx)("select",{value:s.numberOfGuests,onChange:t=>n({...s,numberOfGuests:parseInt(t.target.value)}),className:"input-field",children:[1,2,3,4,5].map(t=>(0,a.jsxs)("option",{value:t,children:[t," ",1===t?"guest":"guests"]},t))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message (optional)"}),(0,a.jsx)("textarea",{value:s.message,onChange:t=>n({...s,message:t.target.value}),className:"input-field min-h-[80px]",placeholder:"Any message for the hosts..."})]}),(0,a.jsx)("button",{type:"submit",disabled:h.isPending,className:"w-full btn-primary disabled:opacity-50",children:h.isPending?"Submitting...":"Submit RSVP"})]})]})})}function k(t){let{site:e}=t,[s,n]=(0,i.useState)({authorName:"",message:""}),{data:l,refetch:u}=(0,r.a)({queryKey:["wishes",e._id],queryFn:async()=>(await f.cF.getApproved(e._id)).data}),d=(0,o.D)({mutationFn:()=>f.cF.submit(e._id,s.authorName,s.message),onSuccess:()=>{var t;n({authorName:"",message:""}),u(),c().fire({icon:"success",title:"Thank You!",text:(null===(t=e.settings)||void 0===t?void 0:t.requireWishApproval)?"Your wish has been submitted and will appear after approval":"Your wish has been added",timer:2e3,showConfirmButton:!1})},onError:t=>{var e,s;c().fire({icon:"error",title:"Error",text:(null===(s=t.response)||void 0===s?void 0:null===(e=s.data)||void 0===e?void 0:e.error)||"Failed to submit wish"})}});return(0,a.jsx)("section",{className:"py-16 px-4",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)(h.Z,{className:"w-10 h-10 text-pink-500 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"Wishes & Messages"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Leave your heartfelt wishes for the couple"})]}),(0,a.jsx)("form",{onSubmit:t=>{t.preventDefault(),s.authorName.trim()&&s.message.trim()&&d.mutate()},className:"card mb-8",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Name"}),(0,a.jsx)("input",{type:"text",required:!0,value:s.authorName,onChange:t=>n({...s,authorName:t.target.value}),className:"input-field",placeholder:"Enter your name"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Message"}),(0,a.jsx)("textarea",{required:!0,value:s.message,onChange:t=>n({...s,message:t.target.value}),className:"input-field min-h-[100px]",placeholder:"Write your wishes..."})]}),(0,a.jsxs)("button",{type:"submit",disabled:d.isPending,className:"btn-primary flex items-center justify-center gap-2 disabled:opacity-50",children:[(0,a.jsx)(y,{className:"w-4 h-4"}),d.isPending?"Sending...":"Send Wish"]})]})}),l&&l.length>0&&(0,a.jsx)("div",{className:"space-y-4",children:l.map(t=>(0,a.jsxs)("div",{className:"card ".concat(t.isHighlighted?"border-2 border-pink-300 bg-pink-50":""),children:[t.isHighlighted&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-pink-600 text-sm mb-2",children:[(0,a.jsx)(h.Z,{className:"w-4 h-4 fill-current"}),(0,a.jsx)("span",{children:"Highlighted"})]}),(0,a.jsx)("p",{className:"text-gray-700 mb-3",children:t.message}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["â€” ",t.authorName]})]},t._id))})]})})}},1837:function(t,e,s){"use strict";s.d(e,{VL:function(){return c},YK:function(){return u},cF:function(){return h},iJ:function(){return o},oI:function(){return l}});var a=s(3464),i=s(4131);let n=s(257).env.NEXT_PUBLIC_API_URL||"http://localhost:5000/api",r=a.Z.create({baseURL:n,headers:{"Content-Type":"application/json"}});r.interceptors.request.use(t=>{let e=i.Z.get("token");return e&&(t.headers.Authorization="Bearer ".concat(e)),t}),r.interceptors.response.use(t=>t,t=>{var e;return(null===(e=t.response)||void 0===e?void 0:e.status)===401&&(i.Z.remove("token"),window.location.href="/login"),Promise.reject(t)});let o={login:(t,e)=>r.post("/auth/login",{email:t,password:e}),register:(t,e,s)=>r.post("/auth/register",{name:t,email:e,password:s}),me:()=>r.get("/auth/me")},l={getPublished:()=>r.get("/templates/published"),getAll:()=>r.get("/templates"),getOne:t=>r.get("/templates/".concat(t)),create:t=>r.post("/templates",t),update:(t,e)=>r.put("/templates/".concat(t),e),delete:t=>r.delete("/templates/".concat(t)),duplicate:t=>r.post("/templates/".concat(t,"/duplicate")),publish:t=>r.post("/templates/".concat(t,"/publish")),unpublish:t=>r.post("/templates/".concat(t,"/unpublish")),preview:(t,e)=>r.post("/templates/".concat(t,"/preview"),{previewDataId:e}),addSection:(t,e)=>r.post("/templates/".concat(t,"/sections"),e),updateSection:(t,e,s)=>r.put("/templates/".concat(t,"/sections/").concat(e),s),deleteSection:(t,e)=>r.delete("/templates/".concat(t,"/sections/").concat(e)),reorderSections:(t,e)=>r.post("/templates/".concat(t,"/sections/reorder"),{sectionOrder:e})},c={getAll:()=>r.get("/sites"),getOne:t=>r.get("/sites/".concat(t)),getBySlug:t=>r.get("/sites/public/".concat(t)),create:(t,e)=>r.post("/sites",{templateId:t,title:e}),update:(t,e)=>r.put("/sites/".concat(t),e),updateSlug:(t,e)=>r.put("/sites/".concat(t,"/slug"),{slug:e}),updateSection:(t,e,s,a)=>r.put("/sites/".concat(t,"/sections/").concat(e),{content:s,visible:a}),reorderSections:(t,e)=>r.post("/sites/".concat(t,"/sections/reorder"),{sectionOrder:e}),publish:t=>r.post("/sites/".concat(t,"/publish")),unpublish:t=>r.post("/sites/".concat(t,"/unpublish")),delete:t=>r.delete("/sites/".concat(t)),getStats:t=>r.get("/sites/".concat(t,"/stats"))},u={getAll:t=>r.get("/guests/".concat(t)),getStats:t=>r.get("/guests/".concat(t,"/stats")),updateStatus:(t,e,s)=>r.put("/guests/".concat(t,"/").concat(e,"/status"),{status:s}),delete:(t,e)=>r.delete("/guests/".concat(t,"/").concat(e)),export:t=>r.get("/guests/".concat(t,"/export")),submitRsvp:(t,e)=>r.post("/guests/".concat(t,"/rsvp"),e),lookupRsvp:(t,e)=>r.post("/guests/".concat(t,"/rsvp/lookup"),{email:e}),updateRsvp:(t,e)=>r.put("/guests/".concat(t,"/rsvp"),e)},h={getAll:t=>r.get("/wishes/".concat(t)),getApproved:t=>r.get("/wishes/".concat(t,"/approved")),getStats:t=>r.get("/wishes/".concat(t,"/stats")),approve:(t,e)=>r.post("/wishes/".concat(t,"/").concat(e,"/approve")),reject:(t,e)=>r.post("/wishes/".concat(t,"/").concat(e,"/reject")),toggleHighlight:(t,e)=>r.post("/wishes/".concat(t,"/").concat(e,"/highlight")),delete:(t,e)=>r.delete("/wishes/".concat(t,"/").concat(e)),bulkApprove:(t,e)=>r.post("/wishes/".concat(t,"/bulk/approve"),{wishIds:e}),bulkReject:(t,e)=>r.post("/wishes/".concat(t,"/bulk/reject"),{wishIds:e}),bulkDelete:(t,e)=>r.post("/wishes/".concat(t,"/bulk/delete"),{wishIds:e}),submit:(t,e,s)=>r.post("/wishes/".concat(t),{authorName:e,message:s})}},2894:function(t,e,s){"use strict";s.d(e,{R:function(){return o},m:function(){return r}});var a=s(8238),i=s(7989),n=s(1255),r=class extends i.F{#t;#e;#s;#a;constructor(t){super(),this.#t=t.client,this.mutationId=t.mutationId,this.#s=t.mutationCache,this.#e=[],this.state=t.state||o(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){this.#e.includes(t)||(this.#e.push(t),this.clearGcTimeout(),this.#s.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.#e=this.#e.filter(e=>e!==t),this.scheduleGc(),this.#s.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.#e.length||("pending"===this.state.status?this.scheduleGc():this.#s.remove(this))}continue(){return this.#a?.continue()??this.execute(this.state.variables)}async execute(t){let e=()=>{this.#i({type:"continue"})},s={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#a=(0,n.Mz)({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(Error("No mutationFn found")),onFail:(t,e)=>{this.#i({type:"failed",failureCount:t,error:e})},onPause:()=>{this.#i({type:"pause"})},onContinue:e,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#s.canRun(this)});let a="pending"===this.state.status,i=!this.#a.canStart();try{if(a)e();else{this.#i({type:"pending",variables:t,isPaused:i}),await this.#s.config.onMutate?.(t,this,s);let e=await this.options.onMutate?.(t,s);e!==this.state.context&&this.#i({type:"pending",context:e,variables:t,isPaused:i})}let n=await this.#a.start();return await this.#s.config.onSuccess?.(n,t,this.state.context,this,s),await this.options.onSuccess?.(n,t,this.state.context,s),await this.#s.config.onSettled?.(n,null,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(n,null,t,this.state.context,s),this.#i({type:"success",data:n}),n}catch(e){try{throw await this.#s.config.onError?.(e,t,this.state.context,this,s),await this.options.onError?.(e,t,this.state.context,s),await this.#s.config.onSettled?.(void 0,e,this.state.variables,this.state.context,this,s),await this.options.onSettled?.(void 0,e,t,this.state.context,s),e}finally{this.#i({type:"error",error:e})}}finally{this.#s.runNext(this)}}#i(t){this.state=(e=>{switch(t.type){case"failed":return{...e,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...e,isPaused:!0};case"continue":return{...e,isPaused:!1};case"pending":return{...e,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...e,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...e,data:void 0,error:t.error,failureCount:e.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}})(this.state),a.Vr.batch(()=>{this.#e.forEach(e=>{e.onMutationUpdate(t)}),this.#s.notify({mutation:this,type:"updated",action:t})})}};function o(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}},1770:function(t,e,s){"use strict";s.d(e,{D:function(){return u}});var a=s(2265),i=s(2894),n=s(8238),r=s(4112),o=s(5345),l=class extends r.l{#t;#n=void 0;#r;#o;constructor(t,e){super(),this.#t=t,this.setOptions(e),this.bindMethods(),this.#l()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){let e=this.options;this.options=this.#t.defaultMutationOptions(t),(0,o.VS)(this.options,e)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),e?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(e.mutationKey)!==(0,o.Ym)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#l(),this.#c(t)}getCurrentResult(){return this.#n}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#l(),this.#c()}mutate(t,e){return this.#o=e,this.#r?.removeObserver(this),this.#r=this.#t.getMutationCache().build(this.#t,this.options),this.#r.addObserver(this),this.#r.execute(t)}#l(){let t=this.#r?.state??(0,i.R)();this.#n={...t,isPending:"pending"===t.status,isSuccess:"success"===t.status,isError:"error"===t.status,isIdle:"idle"===t.status,mutate:this.mutate,reset:this.reset}}#c(t){n.Vr.batch(()=>{if(this.#o&&this.hasListeners()){let e=this.#n.variables,s=this.#n.context,a={client:this.#t,meta:this.options.meta,mutationKey:this.options.mutationKey};t?.type==="success"?(this.#o.onSuccess?.(t.data,e,s,a),this.#o.onSettled?.(t.data,null,e,s,a)):t?.type==="error"&&(this.#o.onError?.(t.error,e,s,a),this.#o.onSettled?.(void 0,t.error,e,s,a))}this.listeners.forEach(t=>{t(this.#n)})})}},c=s(9827);function u(t,e){let s=(0,c.NL)(e),[i]=a.useState(()=>new l(s,t));a.useEffect(()=>{i.setOptions(t)},[i,t]);let r=a.useSyncExternalStore(a.useCallback(t=>i.subscribe(n.Vr.batchCalls(t)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),u=a.useCallback((t,e)=>{i.mutate(t,e).catch(o.ZT)},[i]);if(r.error&&(0,o.L3)(i.options.throwOnError,[r.error]))throw r.error;return{...r,mutate:u,mutateAsync:r.mutate}}}},function(t){t.O(0,[461,294,763,713,971,117,744],function(){return t(t.s=5377)}),_N_E=t.O()}]);