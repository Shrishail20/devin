(()=>{var e={};e.id=140,e.ids=[140],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7790:e=>{"use strict";e.exports=require("assert")},4770:e=>{"use strict";e.exports=require("crypto")},7702:e=>{"use strict";e.exports=require("events")},2048:e=>{"use strict";e.exports=require("fs")},2615:e=>{"use strict";e.exports=require("http")},2694:e=>{"use strict";e.exports=require("http2")},8791:e=>{"use strict";e.exports=require("https")},5315:e=>{"use strict";e.exports=require("path")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1764:e=>{"use strict";e.exports=require("util")},1568:e=>{"use strict";e.exports=require("zlib")},9767:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>x,tree:()=>c}),s(5333),s(2834),s(5495),s(5866);var r=s(3191),a=s(8716),i=s(7922),n=s.n(i),l=s(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["dashboard",{children:["sites",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5333)),"/home/ubuntu/repos/devin/frontend/evento/src/app/dashboard/sites/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2834)),"/home/ubuntu/repos/devin/frontend/evento/src/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,5495)),"/home/ubuntu/repos/devin/frontend/evento/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/home/ubuntu/repos/devin/frontend/evento/src/app/dashboard/sites/page.tsx"],u="/dashboard/sites/page",h={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/sites/page",pathname:"/dashboard/sites",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2699:(e,t,s)=>{Promise.resolve().then(s.bind(s,5270))},8307:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(2881).Z)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},4061:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(2881).Z)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},5270:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>k});var r=s(326),a=s(7577),i=s(4976),n=s(108),l=s(119),o=s(434),c=s(2919),d=s(3855),u=s(8307),h=s(4014),x=s(2881);let p=(0,x.Z)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),m=(0,x.Z)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),g=(0,x.Z)("qr-code",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]),y=(0,x.Z)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var f=s(2714),b=s(4061),v=s(7427);let j=(0,x.Z)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),N=(0,x.Z)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var w=s(8069);function k(){let e=(0,i.NL)(),[t,s]=(0,a.useState)(""),[x,p]=(0,a.useState)("all"),{data:m,isLoading:g}=(0,n.a)({queryKey:["sites"],queryFn:async()=>(await w.VL.getAll()).data}),y=(0,l.D)({mutationFn:e=>w.VL.delete(e),onSuccess:()=>{e.invalidateQueries({queryKey:["sites"]}),c.Z.fire({icon:"success",title:"Deleted",text:"Site has been deleted",timer:1500,showConfirmButton:!1})}}),f=async e=>{(await c.Z.fire({title:"Delete Site?",text:`Are you sure you want to delete "${e.title}"? This cannot be undone.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#ef4444",confirmButtonText:"Delete"})).isConfirmed&&y.mutate(e._id)},b=e=>{let t=`${window.location.origin}/e/${e.slug}`;navigator.clipboard.writeText(t),c.Z.fire({icon:"success",title:"Link Copied!",text:t,timer:2e3,showConfirmButton:!1})},v=m?.filter(e=>{let s=e.title.toLowerCase().includes(t.toLowerCase()),r="all"===x||e.status===x;return s&&r});return(0,r.jsxs)("div",{className:"space-y-6 pb-20 md:pb-0",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"My Sites"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your event sites"})]}),(0,r.jsxs)(o.default,{href:"/dashboard/templates",className:"btn-primary inline-flex items-center gap-2",children:[r.jsx(d.Z,{className:"w-4 h-4"})," Create New Site"]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[r.jsx(u.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search sites...",value:t,onChange:e=>s(e.target.value),className:"input-field pl-12"})]}),r.jsx("div",{className:"flex gap-2",children:["all","published","draft"].map(e=>r.jsx("button",{onClick:()=>p(e),className:`px-4 py-2 rounded-xl capitalize transition-all ${x===e?"bg-purple-600 text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:e},e))})]}),g?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3].map(e=>(0,r.jsxs)("div",{className:"card animate-pulse",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-2/3 mb-4"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-4"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("div",{className:"h-10 bg-gray-200 rounded flex-1"}),r.jsx("div",{className:"h-10 bg-gray-200 rounded flex-1"})]})]},e))}):v&&v.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(e=>r.jsx(M,{site:e,onDelete:()=>f(e),onCopyLink:()=>b(e)},e._id))}):(0,r.jsxs)("div",{className:"text-center py-16",children:[r.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(h.Z,{className:"w-10 h-10 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No sites yet"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Create your first event site from a template"}),(0,r.jsxs)(o.default,{href:"/dashboard/templates",className:"btn-primary inline-flex items-center gap-2",children:[r.jsx(d.Z,{className:"w-4 h-4"})," Browse Templates"]})]})]})}function M({site:e,onDelete:t,onCopyLink:s}){let[i,n]=(0,a.useState)(!1);return(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-100 to-pink-100 rounded-xl flex items-center justify-center",children:r.jsx(h.Z,{className:"w-6 h-6 text-purple-600"})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:e.title}),r.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${"published"===e.status?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:e.status})]})]}),(0,r.jsxs)("div",{className:"relative",children:[r.jsx("button",{onClick:()=>n(!i),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(p,{className:"w-5 h-5 text-gray-500"})}),i&&(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>n(!1)}),(0,r.jsxs)("div",{className:"absolute right-0 top-full mt-1 w-48 bg-white rounded-xl shadow-lg border border-gray-100 py-2 z-20",children:[(0,r.jsxs)("button",{onClick:()=>{s(),n(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(m,{className:"w-4 h-4"})," Copy Link"]}),(0,r.jsxs)("button",{onClick:()=>n(!1),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(g,{className:"w-4 h-4"})," QR Code"]}),r.jsx("hr",{className:"my-2"}),(0,r.jsxs)("button",{onClick:()=>{t(),n(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[r.jsx(y,{className:"w-4 h-4"})," Delete"]})]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4 text-center",children:[(0,r.jsxs)("div",{className:"p-2 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"flex items-center justify-center gap-1 text-gray-500 mb-1",children:r.jsx(f.Z,{className:"w-4 h-4"})}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.stats?.views||0}),r.jsx("p",{className:"text-xs text-gray-500",children:"Views"})]}),(0,r.jsxs)("div",{className:"p-2 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"flex items-center justify-center gap-1 text-gray-500 mb-1",children:r.jsx(b.Z,{className:"w-4 h-4"})}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.stats?.rsvpCount||0}),r.jsx("p",{className:"text-xs text-gray-500",children:"RSVPs"})]}),(0,r.jsxs)("div",{className:"p-2 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"flex items-center justify-center gap-1 text-gray-500 mb-1",children:r.jsx(v.Z,{className:"w-4 h-4"})}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:e.stats?.wishCount||0}),r.jsx("p",{className:"text-xs text-gray-500",children:"Wishes"})]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(o.default,{href:`/dashboard/sites/${e._id}/edit`,className:"flex-1 btn-secondary text-sm flex items-center justify-center gap-2",children:[r.jsx(j,{className:"w-4 h-4"})," Edit"]}),"published"===e.status&&(0,r.jsxs)(o.default,{href:`/e/${e.slug}`,target:"_blank",className:"flex-1 btn-primary text-sm flex items-center justify-center gap-2",children:[r.jsx(N,{className:"w-4 h-4"})," View"]})]})]})}},5333:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(8570).createProxy)(String.raw`/home/ubuntu/repos/devin/frontend/evento/src/app/dashboard/sites/page.tsx#default`)},119:(e,t,s)=>{"use strict";s.d(t,{D:()=>d});var r=s(7577),a=s(1180),i=s(2113),n=s(4351),l=s(3341),o=class extends n.l{#e;#t=void 0;#s;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,l.VS)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,l.Ym)(t.mutationKey)!==(0,l.Ym)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#a(),this.#i()}mutate(e,t){return this.#r=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#a(){let e=this.#s?.state??(0,a.R)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#i(e){i.Vr.batch(()=>{if(this.#r&&this.hasListeners()){let t=this.#t.variables,s=this.#t.context,r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#r.onSuccess?.(e.data,t,s,r),this.#r.onSettled?.(e.data,null,t,s,r)):e?.type==="error"&&(this.#r.onError?.(e.error,t,s,r),this.#r.onSettled?.(void 0,e.error,t,s,r))}this.listeners.forEach(e=>{e(this.#t)})})}},c=s(4976);function d(e,t){let s=(0,c.NL)(t),[a]=r.useState(()=>new o(s,e));r.useEffect(()=>{a.setOptions(e)},[a,e]);let n=r.useSyncExternalStore(r.useCallback(e=>a.subscribe(i.Vr.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),d=r.useCallback((e,t)=>{a.mutate(e,t).catch(l.ZT)},[a]);if(n.error&&(0,l.L3)(a.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:d,mutateAsync:n.mutate}}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[360,859,992,919,397,91,158],()=>s(9767));module.exports=r})();